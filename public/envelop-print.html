<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>列印信封（r3） - Rabbithome</title>
  <link rel="stylesheet" href="/css/envelop.css">
</head>
<body>
  <div class="wrap">
    <header class="page-header">
      <h1>📮 列印信封</h1>
      <nav class="top-nav">
        <button id="btnNew" class="btn">＋ 新增信封</button>
        <button id="btnList" class="btn btn-ghost">📜 列印紀錄</button>
      </nav>
    </header>

    <section id="formSection" class="card">
      <h2>填寫寄件與收件資訊</h2>
      <div class="grid">
        <div class="field span-2">
          <label>綽號</label>
          <input id="nickname" class="w-24" placeholder="例如 花花" />
        </div>

        <div class="field span-2">
          <label>來源</label>
          <div class="row gap wrap">
            <label class="chk"><input type="checkbox" id="bigPkg"> 大型包裹</label>
            <div class="sep"></div>
            <div class="chips" id="platformChips">
              <label class="chip"><input type="checkbox" value="Line"><span>Line</span></label>
              <label class="chip"><input type="checkbox" value="官網"><span>官網</span></label>
              <label class="chip"><input type="checkbox" value="Yahoo"><span>Yahoo</span></label>
              <label class="chip"><input type="checkbox" value="露天"><span>露天</span></label>
              <label class="chip"><input type="checkbox" value="蝦皮"><span>蝦皮</span></label>
            </div>
          </div>
        </div>

        <div class="field">
          <label>寄件公司</label>
          <select id="senderCompany">
            <option value="rabbit">數位小兔</option>
            <option value="focus">聚焦數位</option>
            <option value="nosleep">免睡攝影</option>
            <option value="other">其他</option>
          </select>
        </div>

        <div class="field">
          <label>收件人姓名</label>
          <input id="recvName" placeholder="收件人" />
        </div>
        <div class="field">
          <label>收件人電話</label>
          <input id="recvPhone" placeholder="09xx-xxx-xxx" />
        </div>
        <div class="field span-2">
          <label>收件人地址</label>
          <input id="recvAddr" placeholder="完整地址" />
        </div>

        <div class="field span-2">
          <label>商品資訊（選填；若填寫會印在最下方一行）</label>
          <input id="productInfo" placeholder="例如：Godox Lux Senior / 1入 / 黑色" />
        </div>
      </div>

      <div class="actions">
        <div class="muted" id="serialPreview">今日下一號（預估）：MMDD???</div>
        <div class="grow"></div>
        <button id="btnPrint" class="btn btn-primary">🖨️ 列印信封</button>
        <button id="btnPrintReply" class="btn btn-accent">🖨️ 列印回郵信封</button>
        <button id="btnSaveOnly" class="btn btn-ghost">💾 只存紀錄（不列印）</button>
      </div>
    </section>

    <section id="listSection" class="card hidden">
      <div class="list-toolbar">
        <h2>📜 信封列印紀錄</h2>
        <div class="filters">
          <div class="date-range">
            <strong id="rangeTitle">（載入中）</strong>
            <div class="row gap">
              <button class="btn sm" data-range="1d">前一天</button>
              <button class="btn sm" data-range="3d">前三天</button>
              <button class="btn sm" data-range="1w">前一週</button>
              <button class="btn sm" data-range="1m">前一月</button>
              <input type="date" id="pickDate">
              <button id="btnPickDay" class="btn sm">查該日</button>
            </div>
          </div>
          <div class="search-area row gap">
            <input id="kw" placeholder="搜尋：姓名 / 電話 / 地址 / 商品" />
            <button id="btnSearch" class="btn sm">搜尋</button>
            <div class="sep"></div>
            <div class="sort row gap">
              <span class="muted">排序：</span>
              <button class="btn sm" id="sortTimeUp">時間↑</button>
              <button class="btn sm" id="sortTimeDown">時間↓</button>
              <button class="btn sm" id="sortAddrUp">地址↑</button>
              <button class="btn sm" id="sortAddrDown">地址↓</button>
            </div>
          </div>
        </div>
      </div>

      <div class="table-wrap">
        <table class="table" id="recordsTable">
          <thead>
            <tr>
              <th>時間</th>
              <th>收件人</th>
              <th>地址</th>
              <th>電話</th>
              <th>商品</th>
              <th>來源</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="recordsBody">
            <tr><td colspan="7" class="muted">尚無資料</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </div>

  <script src="/js/firebase.js"></script>
  <script type="module" src="/js/envelop.js"></script>
</body>
</html>
