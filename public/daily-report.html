<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>工作紀錄｜Rabbithome</title>
  <link rel="stylesheet" href="/css/daily-report.css" />
  <script type="module" src="/js/daily-report.js?v=3.5"></script>
</head>
<body>
  <div class="dr-wrap">
    <aside class="dr-sidebar">
      <h2 class="dr-sidertitle">🔎 篩選與搜尋</h2>
      <div class="dr-block text-sm text-muted">搜尋僅限最近 60 天</div>
      <label class="dr-block">搜尋（標題/內文/作者）
        <input id="searchInput" type="search" class="dr-input" placeholder="輸入關鍵字…" />
      </label>
      <div class="dr-filter">
        <label><input id="viewMine" type="radio" name="viewScope" value="mine" /> 只看我的</label>
        <label><input id="viewAll" type="radio" name="viewScope" value="all" checked /> 全部</label>
      </div>
      <div class="dr-legend">
        <div><span class="dot me"></span> 我的回報</div>
        <div><span class="dot boss"></span> 老闆回覆</div>
      </div>
      <div class="dr-note">
        <div>期間：<span id="rangeText">—</span></div>
        <div>登入：<span id="whoami">—</span></div>
      </div>
    </aside>

    <main class="dr-main">
      <section class="dr-editor-card">
        <header class="dr-editor-head">
          <div class="dr-title-left">
            <h1 class="dr-page-title">今日工作</h1>
            <div class="dr-sub">今天：<span id="todayLabel">—</span></div>
          </div>
          <div class="dr-title-right">
            <input id="reportTitle" class="dr-title-input" placeholder="今日標題（可不填）" />
            <button id="btnSave" class="dr-btn dr-btn-primary">💾 儲存/更新今天</button>
          </div>
        </header>

        <div class="dr-toolbar">
          <button id="btnBold" data-cmd="bold" title="粗體 (Ctrl/Cmd+B)"><b>B</b></button>
          <button id="btnItalic" data-cmd="italic" title="斜體 (Ctrl/Cmd+I)"><i>I</i></button>
          <button id="btnUnderline" data-cmd="underline" title="底線 (Ctrl/Cmd+U)"><u>U</u></button>
          <span class="sep"></span>
          <label class="colorpick"><span>字色</span><input id="foreColor" type="color" value="#111111" /></label>
          <label class="colorpick"><span>底色</span><input id="backColor" type="color" value="#fff59d" /></label>
          <span class="sep"></span>
          <button id="btnUndo" title="復原 (Ctrl/Cmd+Z)">↶ Undo</button>
          <button id="btnRedo" title="重做 (Ctrl/Cmd+Y / Shift+Ctrl+Z)">↷ Redo</button>
          <span class="sep"></span>
          <button id="btnClear">清除格式</button>
        </div>

        <div id="editor" class="dr-editor" contenteditable="true"></div>
        <div class="dr-tip">提示：選取文字即可變更字色/底色；支援 Ctrl/Cmd + B/U/I 與 Undo/Redo。</div>
      </section>

      <section>
        <h2 class="dr-list-title">工作紀錄（最近 60 天）</h2>
        <ul id="reportList" class="dr-list"></ul>
      </section>
    </main>
  </div>

  <div id="toast" class="toast" hidden></div>
</body>
</html>
